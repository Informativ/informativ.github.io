<!DOCTYPE html>
<html>
	<head>
		<meta charset='utf-8'>
		<meta http-equiv="X-UA-Compatible" content="chrome=1">
		<link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" href="/assets/css/style.css?v=9bc4e48bbf92966921aac70b2a19f78ac84674b8">
		<link rel="stylesheet" type="text/css" href="/assets/css/print.css" media="print">
		<!--[if lt IE 9]>
			<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		<title>informativ.github.io by Informativ</title>
	</head>

	<body>
		<div id="container">
			<div class="inner">

				<header>
					<h1>Velkommen!</h1>
				</header>

				<hr>
				<section id="main_content">
					<h1 id="usb">USB</h1>

<p>I denne oppgaven skal vi se på hvordan man kan sende informasjon mellom en Micro:bit og en PC over USB</p>

<h2 id="hva-trenger-du">Hva trenger du?</h2>

<p>For å fullføre denne oppgaven trenger du:</p>

<p>Ingenting!</p>

<h2 id="hvordan">Hvordan</h2>

<p>I microbit finnes det en UART modul som kan brukes til å sende data over USB.
For å bruke denne må vi initialisere uart med <code class="highlighter-rouge">uart.init()</code>.
Etter dette kan vi begynne å sende data med <code class="highlighter-rouge">uart.write()</code>. Denne funksjonen tar inn en byte variabel, så vi må gjøre om meldingen vår til bytes.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">melding</span> <span class="o">=</span> <span class="s">"Hei fra Micro:bit"</span>

<span class="n">uart</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">bytes</span><span class="p">(</span><span class="n">melding</span><span class="p">,</span> <span class="s">'utf-8'</span><span class="p">))</span></code></pre></figure>

<p>Nå må vi lage et program for å ta i mot meldingen på PC.</p>

<p>Vi kan bruke python med pyserial for å lese fra USB. Importer denne med <code class="highlighter-rouge">import serial</code>.
Pyserial kan brukes til å lese/skrive fra flere ting, så den må få beskjed om hvor den skal lese fra.</p>

<p>I Windows leser vi fra USB med å hente informasjon i ‘COM0’, ‘COM1’, osv. I ‘Enhetsbehandling’ finner du hvilken COM Micro:bit er koblet til.</p>

<p>I Linux leser vi fra ‘/dev/ttyACM0’, eller ‘/dev/ttyUSB0’. Hvilken din PC bruker finner du med å skrive ‘ls /dev/’ i terminalen.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">ser</span> <span class="o">=</span> <span class="n">serial</span><span class="o">.</span><span class="n">Serial</span><span class="p">(</span><span class="s">'/dev/ttyACM0'</span><span class="p">,</span> <span class="mi">9600</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="c">#Les fra USB</span>
<span class="k">except</span><span class="p">:</span>
    <span class="k">pass</span>    </code></pre></figure>

<p>Etter du har valgt hvor du leser fra kan vi begynne å lese. Dette må gjøres i en try / except blokk, fordi det ikke er sikkert at den klarer å lese noe data. 
Pyserial leser bytes fra USB med <code class="highlighter-rouge">ser.read()</code> eller <code class="highlighter-rouge">ser.readline()</code>.</p>

				</section>

				<footer>
					<img src="/assets/images/MN_IFI_Segl_A.png" style="margin-bottom:15px;width:80%;height:80%;">
					</br>
					
					informativ.github.io is maintained by <a href="http://github.com/Informativ">Informativ</a><br>
					
					This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.
				</footer>

			</div>
		</div>

		
	</body>
</html>
